basePath: /api
definitions:
  apis.BoxCommonResponse:
    properties:
      created_at:
        type: string
      id:
        type: integer
      owner_id:
        type: integer
      post_count:
        type: integer
      title:
        type: string
      updated_at:
        type: string
      view_count:
        type: integer
    type: object
  apis.BoxCreateRequest:
    properties:
      title:
        type: string
    required:
    - title
    type: object
  apis.BoxGetResponse:
    properties:
      created_at:
        type: string
      id:
        type: integer
      owner_id:
        type: integer
      post_count:
        type: integer
      posts:
        items:
          type: string
        type: array
      title:
        type: string
      updated_at:
        type: string
      view_count:
        type: integer
    type: object
  apis.BoxListResponse:
    properties:
      messageBoxes:
        items:
          $ref: '#/definitions/apis.BoxCommonResponse'
        type: array
      total:
        description: Box 总数，便于前端分页
        type: integer
      version:
        type: integer
    type: object
  apis.BoxModifyRequest:
    properties:
      title:
        type: string
    type: object
  apis.ChannelCommonResponse:
    properties:
      content:
        type: string
      id:
        type: integer
      is_owner:
        type: boolean
      post_id:
        type: integer
    type: object
  apis.ChannelCreateRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      post_id:
        type: integer
    required:
    - content
    - post_id
    type: object
  apis.ChannelListResponse:
    properties:
      channels:
        items:
          $ref: '#/definitions/apis.ChannelCommonResponse'
        type: array
      total:
        description: Channel 总数，便于前端分页
        type: integer
      version:
        type: integer
    type: object
  apis.ChannelModifyRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
    required:
    - content
    type: object
  apis.ChatCommonResponse:
    properties:
      another_user_id:
        type: integer
      created_at:
        type: string
      id:
        type: integer
      last_message_content:
        type: string
      message_count:
        type: integer
      one_user_id:
        type: integer
      updated_at:
        type: string
    type: object
  apis.ChatListResponse:
    properties:
      chats:
        description: 返回时按照 UpdatedAt 降序排列
        items:
          $ref: '#/definitions/apis.ChatCommonResponse'
        type: array
    type: object
  apis.CommentCommonResponse:
    properties:
      anonyname:
        type: string
        x-nullable: true
      content:
        type: string
      created_at:
        type: string
      dislike_count:
        description: 点踩数
        type: integer
      disliked:
        type: boolean
      id:
        type: integer
      is_anonymous:
        type: boolean
      is_hidden:
        type: boolean
      is_owner:
        description: 动态生成的字段
        type: boolean
      like_count:
        description: 统计数据
        type: integer
      liked:
        type: boolean
      poster:
        $ref: '#/definitions/apis.UserResponse'
      poster_id:
        type: integer
      ranking:
        type: integer
      reply_to_id:
        type: integer
        x-nullable: true
      topic_id:
        type: integer
      updated_at:
        type: string
    type: object
  apis.CommentCreateRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      is_anonymous:
        description: 默认实名
        type: boolean
      reply_to_id:
        type: integer
      topic_id:
        minimum: 1
        type: integer
    required:
    - content
    - topic_id
    type: object
  apis.CommentListResponse:
    properties:
      comments:
        items:
          $ref: '#/definitions/apis.CommentCommonResponse'
        type: array
    type: object
  apis.CommentModifyRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      is_hidden:
        description: admin only
        type: boolean
    type: object
  apis.DivisionCommonResponse:
    properties:
      description:
        type: string
        x-nullable: true
      id:
        type: integer
      name:
        type: string
      pinned_topics:
        items:
          $ref: '#/definitions/apis.TopicCommonResponse'
        type: array
        x-nullable: true
    type: object
  apis.DivisionCreateRequest:
    properties:
      description:
        maxLength: 200
        minLength: 1
        type: string
      name:
        maxLength: 20
        minLength: 1
        type: string
    required:
    - name
    type: object
  apis.DivisionListResponse:
    properties:
      divisions:
        items:
          $ref: '#/definitions/apis.DivisionCommonResponse'
        type: array
    type: object
  apis.DivisionModifyRequest:
    properties:
      description:
        maxLength: 200
        minLength: 1
        type: string
      name:
        maxLength: 20
        minLength: 1
        type: string
      pinned_topic_ids:
        items:
          type: integer
        type: array
    type: object
  apis.LoginRequest:
    properties:
      password:
        minLength: 8
        type: string
      username:
        minLength: 2
        type: string
    type: object
  apis.LoginResponse:
    properties:
      access_token:
        type: string
      avatar:
        description: 头像链接
        type: string
        x-nullable: true
      banned:
        description: 是否被封禁
        type: boolean
      comment_count:
        description: 发表的评论数
        type: integer
      email:
        description: 邮箱，可选登录
        type: string
        x-nullable: true
      favorite_topics_count:
        description: 收藏的话题数
        type: integer
      followers_count:
        description: 被关注数
        type: integer
      following_users_count:
        description: 关注数
        type: integer
      id:
        type: integer
      introduction:
        description: 个人简介/个性签名
        type: string
        x-nullable: true
      is_admin:
        type: boolean
      topic_count:
        description: 发表的话题数
        type: integer
      username:
        type: string
    type: object
  apis.MessageCommonResponse:
    properties:
      content:
        type: string
      created_at:
        type: string
      from_user_id:
        type: integer
      id:
        type: integer
      is_me:
        type: boolean
      to_user_id:
        type: integer
    type: object
  apis.MessageCreateRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      to_user_id:
        minimum: 1
        type: integer
    required:
    - content
    - to_user_id
    type: object
  apis.MessageListResponse:
    properties:
      messages:
        description: 按照 CreatedAt 倒序排列
        items:
          $ref: '#/definitions/apis.MessageCommonResponse'
        type: array
    type: object
  apis.PostCommonResponse:
    properties:
      anonyname:
        type: string
      channel_count:
        type: integer
      content:
        type: string
      id:
        type: integer
      is_anonymous:
        type: boolean
      is_owner:
        type: boolean
      poster:
        $ref: '#/definitions/apis.UserResponse'
      poster_id:
        type: integer
      view_count:
        type: integer
      visibility:
        description: public private
        type: string
    type: object
  apis.PostCreateRequest:
    properties:
      content:
        description: 限制长度
        maxLength: 2000
        minLength: 1
        type: string
      is_anonymous:
        type: boolean
      message_box_id:
        minimum: 1
        type: integer
      visibility:
        default: public
        enum:
        - public
        - private
        type: string
    required:
    - content
    - message_box_id
    type: object
  apis.PostGetResponse:
    properties:
      anonyname:
        type: string
      channel_count:
        type: integer
      channels:
        items:
          type: string
        type: array
      content:
        type: string
      id:
        type: integer
      is_anonymous:
        type: boolean
      is_owner:
        type: boolean
      poster:
        $ref: '#/definitions/apis.UserResponse'
      poster_id:
        type: integer
      view_count:
        type: integer
      visibility:
        description: public private
        type: string
    type: object
  apis.PostListResponse:
    properties:
      posts:
        items:
          $ref: '#/definitions/apis.PostCommonResponse'
        type: array
      total:
        description: Post 总数，便于前端分页
        type: integer
      version:
        type: integer
    type: object
  apis.PostModifyRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      visibility:
        enum:
        - public
        - private
        type: string
    type: object
  apis.ResetRequest:
    properties:
      new_password:
        minLength: 8
        type: string
      old_password:
        minLength: 8
        type: string
    type: object
  apis.TagCommonResponse:
    properties:
      id:
        type: integer
      name:
        type: string
      temperature:
        type: integer
    type: object
  apis.TagCreateRequest:
    properties:
      name:
        maxLength: 20
        minLength: 1
        type: string
    required:
    - name
    type: object
  apis.TagListResponse:
    properties:
      tags:
        items:
          $ref: '#/definitions/apis.TagCommonResponse'
        type: array
      total:
        type: integer
      version:
        type: integer
    type: object
  apis.TagModifyRequest:
    properties:
      name:
        maxLength: 20
        minLength: 1
        type: string
      temperature:
        maximum: 100
        minimum: 1
        type: integer
    type: object
  apis.TopicCommonResponse:
    properties:
      anonyname:
        type: string
        x-nullable: true
      comment_count:
        description: 评论数
        type: integer
      content:
        type: string
      created_at:
        type: string
      dislike_count:
        description: 点踩数
        type: integer
      disliked:
        type: boolean
      division_id:
        type: integer
      favored:
        type: boolean
      favorite_count:
        description: 收藏数
        type: integer
      id:
        type: integer
      is_anonymous:
        type: boolean
      is_hidden:
        type: boolean
      is_owner:
        description: 动态生成的字段
        type: boolean
      last_comment:
        allOf:
        - $ref: '#/definitions/apis.CommentCommonResponse'
        description: 按照时间排序最后一条评论或者按照点赞数排序最高赞的评论，创建之后为空
        x-nullable: true
      like_count:
        description: 点赞数
        type: integer
      liked:
        type: boolean
      poster:
        $ref: '#/definitions/apis.UserResponse'
      poster_id:
        type: integer
      tags:
        items:
          $ref: '#/definitions/apis.TagCommonResponse'
        type: array
      title:
        type: string
      updated_at:
        type: string
      view_count:
        description: 统计数据
        type: integer
    type: object
  apis.TopicCreateRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      division_id:
        minimum: 1
        type: integer
      is_anonymous:
        description: 默认不传为 false
        type: boolean
      tags:
        items:
          $ref: '#/definitions/apis.TagCreateRequest'
        type: array
      title:
        maxLength: 50
        minLength: 1
        type: string
    required:
    - content
    - division_id
    - title
    type: object
  apis.TopicListResponse:
    properties:
      topics:
        items:
          $ref: '#/definitions/apis.TopicCommonResponse'
        type: array
    type: object
  apis.TopicModifyRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      division_id:
        description: admin only
        minimum: 1
        type: integer
      is_hidden:
        description: admin only
        type: boolean
      tags:
        description: owner or admin
        items:
          $ref: '#/definitions/apis.TagCreateRequest'
        type: array
      title:
        maxLength: 50
        minLength: 1
        type: string
    type: object
  apis.UserListResponse:
    properties:
      total:
        description: User 总数，便于前端分页
        type: integer
      users:
        items:
          $ref: '#/definitions/apis.UserResponse'
        type: array
      version:
        type: integer
    type: object
  apis.UserModifyRequest:
    properties:
      avatar:
        type: string
      email:
        type: string
      introduction:
        minLength: 2
        type: string
      username:
        minLength: 2
        type: string
    type: object
  apis.UserResponse:
    properties:
      avatar:
        description: 头像链接
        type: string
        x-nullable: true
      banned:
        description: 是否被封禁
        type: boolean
      comment_count:
        description: 发表的评论数
        type: integer
      email:
        description: 邮箱，可选登录
        type: string
        x-nullable: true
      favorite_topics_count:
        description: 收藏的话题数
        type: integer
      followers_count:
        description: 被关注数
        type: integer
      following_users_count:
        description: 关注数
        type: integer
      id:
        type: integer
      introduction:
        description: 个人简介/个性签名
        type: string
        x-nullable: true
      is_admin:
        type: boolean
      topic_count:
        description: 发表的话题数
        type: integer
      username:
        type: string
    type: object
  apis.WallCommonResponse:
    properties:
      content:
        type: string
      created_at:
        type: string
      id:
        type: integer
      is_anonymous:
        type: boolean
      is_shown:
        description: 是否显示在表白墙页面
        type: boolean
      poster:
        allOf:
        - $ref: '#/definitions/apis.UserResponse'
        description: 匿名时为 null
      poster_id:
        description: 匿名时为 0
        type: integer
      updated_at:
        type: string
      visibility:
        type: string
    type: object
  apis.WallCreateRequest:
    properties:
      content:
        maxLength: 2000
        minLength: 1
        type: string
      is_anonymous:
        description: 是否匿名，不填默认匿名
        type: boolean
    required:
    - content
    type: object
  apis.WallListResponse:
    properties:
      date:
        description: 日期
        example: "2006-01-02"
        type: string
      posts:
        items:
          $ref: '#/definitions/apis.WallCommonResponse'
        type: array
      total:
        description: Post 总数，便于前端分页
        type: integer
    type: object
  models.EmptyStruct:
    type: object
  utils.ErrorDetailElement:
    properties:
      error_msg:
        type: string
      field:
        type: string
      tag:
        type: string
      value:
        type: string
    type: object
  utils.RespForSwagger:
    properties:
      code:
        type: integer
      data: {}
      error_msg:
        type: string
    type: object
host: localhost:8000
info:
  contact:
    email: jingyijun3104@outlook.com
    name: JingYiJun
    url: https://www.jingyijun.xyz
  description: ChatDan, a message box and 'biaobai' platform for Fudaners.
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: https://swagger.io/terms/
  title: ChatDan Backend
  version: 0.0.1
paths:
  /channel:
    post:
      consumes:
      - application/json
      parameters:
      - description: channel
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.ChannelCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.ChannelCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 创建一条回复 thread, only owner of the post or owner of the message box can
        create channel
      tags:
      - Channel Module
  /channel/{id}:
    delete:
      parameters:
      - description: channel id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 删除一条回复 thread
      tags:
      - Channel Module
    get:
      parameters:
      - description: channel id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.ChannelCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取一条回复 thread 信息
      tags:
      - Channel Module
    put:
      consumes:
      - application/json
      parameters:
      - description: channel id
        in: path
        name: id
        required: true
        type: integer
      - description: channel
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.ChannelModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.ChannelCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 修改一条回复 thread
      tags:
      - Channel Module
  /channels:
    get:
      parameters:
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - in: query
        minimum: 1
        name: post_id
        required: true
        type: integer
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.ChannelListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询帖子的所有回复 thread
      tags:
      - Channel Module
  /chats:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.ChatListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询所有聊天记录，按照 updated_at 倒序排序
      tags:
      - Chat Module
  /comment:
    post:
      consumes:
      - application/json
      parameters:
      - description: comment
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.CommentCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.CommentCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 创建一个评论
      tags:
      - Comment Module
  /comment/{id}:
    delete:
      parameters:
      - description: comment id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 删除一个评论，仅作者或管理员可删除
      tags:
      - Comment Module
    get:
      parameters:
      - description: comment id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.CommentCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取一个评论
      tags:
      - Comment Module
    put:
      consumes:
      - application/json
      parameters:
      - description: comment id
        in: path
        name: id
        required: true
        type: integer
      - description: comment
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.CommentModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.CommentCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 修改一个评论
      tags:
      - Comment Module
  /comment/{id}/like/{like_data}:
    post:
      parameters:
      - description: comment id
        in: path
        name: id
        required: true
        type: integer
      - description: '1: like, -1: dislike, 0: reset'
        enum:
        - 1
        - -1
        - 0
        in: path
        name: like_data
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 点赞或点踩一个评论，或者取消点赞或点踩
      tags:
      - Comment Module
  /comments:
    get:
      parameters:
      - default: id
        enum:
        - id
        - like
        in: query
        name: order_by
        type: string
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - in: query
        minimum: 1
        name: topic_id
        required: true
        type: integer
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.CommentListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询评论，按照 id 升序 或 点赞数倒序 排序
      tags:
      - Comment Module
  /comments/_search:
    get:
      parameters:
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - in: query
        minLength: 1
        name: search
        required: true
        type: string
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.CommentListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 搜索评论
      tags:
      - Comment Module
  /comments/_user/{user_id}:
    get:
      parameters:
      - description: user id
        in: path
        name: user_id
        required: true
        type: integer
      - default: id
        enum:
        - id
        - like
        in: query
        name: order_by
        type: string
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.CommentListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询某个用户的评论，按照 id 升序 或 点赞数倒序 排序
      tags:
      - Comment Module
  /division:
    post:
      consumes:
      - application/json
      parameters:
      - description: division
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.DivisionCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.DivisionCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Create a division, admin only
      tags:
      - Division Module
  /division/{id}:
    delete:
      parameters:
      - description: division id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Delete a division, admin only
      tags:
      - Division Module
    get:
      parameters:
      - description: division id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.DivisionCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Get a division
      tags:
      - Division Module
    put:
      consumes:
      - application/json
      parameters:
      - description: division id
        in: path
        name: id
        required: true
        type: integer
      - description: division
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.DivisionModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.DivisionCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Modify a division, admin only
      tags:
      - Division Module
  /divisions:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.DivisionListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: List all divisions
      tags:
      - Division Module
  /messageBox:
    post:
      consumes:
      - application/json
      parameters:
      - description: box
        in: body
        name: box
        required: true
        schema:
          $ref: '#/definitions/apis.BoxCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.BoxCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 创建提问箱
      tags:
      - MessageBox Module
  /messageBox/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: id
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 删除提问箱
      tags:
      - MessageBox Module
    get:
      consumes:
      - application/json
      parameters:
      - description: id
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.BoxGetResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取提问箱信息
      tags:
      - MessageBox Module
    put:
      consumes:
      - application/json
      parameters:
      - description: id
        in: path
        name: id
        required: true
        type: string
      - description: box
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.BoxModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.BoxCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 修改提问箱信息
      tags:
      - MessageBox Module
  /messageBoxes:
    get:
      consumes:
      - application/json
      parameters:
      - default: id asc
        enum:
        - id asc
        - updated_at desc
        in: query
        name: order_by
        type: string
      - in: query
        minimum: 0
        name: owner
        type: integer
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - in: query
        name: title
        type: string
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.BoxListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询提问箱
      tags:
      - MessageBox Module
  /messages:
    get:
      parameters:
      - default: 10
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      - description: 不填默认为当前时间
        in: query
        name: start_time
        type: string
      - in: query
        minimum: 1
        name: to_user_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.MessageListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询所有聊天记录，按照 created_at 或 id 倒序排序
      tags:
      - Chat Module
    post:
      parameters:
      - description: message
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.MessageCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.MessageCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 发送消息
      tags:
      - Chat Module
  /post:
    post:
      consumes:
      - application/json
      description: 文本至少1字符，最多2000字符
      parameters:
      - description: post
        in: body
        name: post
        required: true
        schema:
          $ref: '#/definitions/apis.PostCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.PostCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 创建帖子、提问
      tags:
      - Post Module
  /post/{id}:
    delete:
      description: Only the owner of library can delete it
      parameters:
      - description: Only the owner of library can delete it.
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 删除帖子
      tags:
      - Post Module
    get:
      parameters:
      - description: id
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.PostGetResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取帖子信息
      tags:
      - Post Module
    put:
      description: Only the owner of library can delete it
      parameters:
      - description: id
        in: path
        name: id
        required: true
        type: string
      - description: post
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.PostModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.PostCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 删除帖子
      tags:
      - Post Module
  /posts:
    get:
      parameters:
      - in: query
        name: message_box_id
        required: true
        type: integer
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.PostListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询所有帖子
      tags:
      - Post Module
  /tag:
    post:
      consumes:
      - application/json
      parameters:
      - description: tag
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.TagCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TagCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 创建一个标签
      tags:
      - Tag Module
  /tag/{id}:
    delete:
      parameters:
      - description: tag id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 删除一个标签，仅管理员可删除
      tags:
      - Tag Module
    get:
      parameters:
      - description: tag id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TagCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取一个标签
      tags:
      - Tag Module
    put:
      consumes:
      - application/json
      parameters:
      - description: tag
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.TagModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TagCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 修改一个标签，仅管理员可修改
      tags:
      - Tag Module
  /tags:
    get:
      parameters:
      - default: id asc
        enum:
        - id asc
        - temperature desc
        in: query
        name: order_by
        type: string
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - description: 搜索标签名
        in: query
        maxLength: 20
        minLength: 1
        name: search
        type: string
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TagListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询标签，按照 热度 倒序 排序
      tags:
      - Tag Module
  /topic:
    post:
      consumes:
      - application/json
      parameters:
      - description: topic
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.TopicCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 创建一个话题
      tags:
      - Topic Module
  /topic/{id}:
    delete:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 删除一个话题，仅管理员
      tags:
      - Topic Module
    get:
      parameters:
      - description: topic id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取一个话题
      tags:
      - Topic Module
    put:
      consumes:
      - application/json
      description: 管理员可修改标题、内容、标签、是否隐藏，用户可修改标题、内容、标签
      parameters:
      - description: topic
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.TopicModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 修改一个话题
      tags:
      - Topic Module
  /topic/{id}/_favor:
    delete:
      parameters:
      - description: topic id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 取消收藏一个话题
      tags:
      - Topic Module
    put:
      parameters:
      - description: topic id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 收藏一个话题，收藏数 +1
      tags:
      - Topic Module
  /topic/{id}/_like/{like_data}:
    put:
      description: '1: like, -1: dislike, 0: reset，点赞点踩二选一'
      parameters:
      - description: topic id
        in: path
        name: id
        required: true
        type: integer
      - description: '1: like, -1: dislike, 0: reset'
        enum:
        - 1
        - -1
        - 0
        in: path
        name: like_data
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 点赞或点踩一个话题，或者重置点赞点踩数据
      tags:
      - Topic Module
  /topic/{id}/_view:
    put:
      parameters:
      - description: topic id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 浏览一个话题，浏览数 +1
      tags:
      - Topic Module
  /topics:
    get:
      parameters:
      - default: id
        enum:
        - id
        - like
        in: query
        name: comment_order_by
        type: string
      - in: query
        minimum: 1
        name: division_id
        type: integer
      - default: created_at
        description: 排序方式，created_at 按照收藏的时间排序，updated_at 按照主题帖更新的时间排序
        enum:
        - created_at
        - updated_at
        in: query
        name: order_by
        type: string
      - default: 10
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      - in: query
        name: start_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询话题，按照最近创建或最近回复排序
      tags:
      - Topic Module
  /topics/_favor:
    get:
      parameters:
      - default: id
        enum:
        - id
        - like
        in: query
        name: comment_order_by
        type: string
      - in: query
        minimum: 1
        name: division_id
        type: integer
      - default: created_at
        description: 排序方式，created_at 按照收藏的时间排序，updated_at 按照主题帖更新的时间排序
        enum:
        - created_at
        - updated_at
        in: query
        name: order_by
        type: string
      - default: 10
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      - in: query
        name: start_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询收藏的话题
      tags:
      - Topic Module
  /topics/_search:
    get:
      parameters:
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - in: query
        maxLength: 100
        minLength: 1
        name: search
        type: string
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 搜索话题
      tags:
      - Topic Module
  /topics/_tag/{tag_id}:
    get:
      parameters:
      - description: tag id
        in: path
        name: tag_id
        required: true
        type: integer
      - default: id
        enum:
        - id
        - like
        in: query
        name: comment_order_by
        type: string
      - in: query
        minimum: 1
        name: division_id
        type: integer
      - default: created_at
        description: 排序方式，created_at 按照收藏的时间排序，updated_at 按照主题帖更新的时间排序
        enum:
        - created_at
        - updated_at
        in: query
        name: order_by
        type: string
      - default: 10
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      - in: query
        name: start_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询标签下的话题
      tags:
      - Topic Module
  /topics/_user/{user_id}:
    get:
      description: 用户查询自己发布的话题，以及点进其他用户主页时查询用户发布的话题
      parameters:
      - description: user id
        in: path
        name: user_id
        required: true
        type: integer
      - default: id
        enum:
        - id
        - like
        in: query
        name: comment_order_by
        type: string
      - in: query
        minimum: 1
        name: division_id
        type: integer
      - default: created_at
        description: 排序方式，created_at 按照收藏的时间排序，updated_at 按照主题帖更新的时间排序
        enum:
        - created_at
        - updated_at
        in: query
        name: order_by
        type: string
      - default: 10
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      - in: query
        name: start_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.TopicListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询用户发布的话题
      tags:
      - Topic Module
  /user/{id}:
    delete:
      parameters:
      - description: user id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 注销用户, admin only
      tags:
      - User Module
    get:
      parameters:
      - description: user id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取用户信息
      tags:
      - User Module
    put:
      parameters:
      - description: user id
        in: path
        name: id
        required: true
        type: integer
      - description: user
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.UserModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 修改用户信息, admin only
      tags:
      - User Module
  /user/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: The two fields are required, you can also add other fields(e.g.
          email).
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.LoginResponse'
              type: object
        "401":
          description: 用户名或密码错误
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Login
      tags:
      - User Module
  /user/logout:
    post:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.UserResponse'
              type: object
        "401":
          description: Invalid JWT Token
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Logout
      tags:
      - User Module
  /user/me:
    delete:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/models.EmptyStruct'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 注销当前用户
      tags:
      - User Module
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取当前用户信息
      tags:
      - User Module
    put:
      parameters:
      - description: user
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.UserModifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.UserResponse'
              type: object
        "400":
          description: Invalid request body
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/utils.ErrorDetailElement'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 修改当前用户信息
      tags:
      - User Module
  /user/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: The two fields are required, you can also add other fields(e.g.
          email).
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.LoginResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Register
      tags:
      - User Module
  /user/reset:
    post:
      consumes:
      - application/json
      parameters:
      - description: json
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.ResetRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "401":
          description: Invalid JWT Token
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: Reset Password
      tags:
      - User Module
  /users:
    get:
      parameters:
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.UserListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 查询所有用户, admin only
      tags:
      - User Module
  /wall:
    get:
      description: 获取今日表白墙，即昨日发送的表白墙
      parameters:
      - description: 日期，不填默认当天（即昨天发送的表白墙）
        example: "2006-01-02"
        in: query
        name: date
        type: string
      - in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: true
        type: integer
      - description: 分页版本号，一个时间戳，用于保证分页查询的一致性和正确性。不填默认使用最新版本时间戳
        in: query
        minimum: 0
        name: version
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.WallListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取今日表白墙
      tags:
      - Wall Module
    post:
      parameters:
      - description: json
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/apis.WallCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.WallCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 创建表白墙
      tags:
      - Wall Module
  /wall/{id}:
    get:
      parameters:
      - description: wall id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.RespForSwagger'
            - properties:
                data:
                  $ref: '#/definitions/apis.WallCommonResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.RespForSwagger'
      summary: 获取表白墙信息
      tags:
      - Wall Module
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
tags:
- description: 用户模块
  name: User Module
- description: 提问箱模块
  name: MessageBox Module
- description: 帖子模块
  name: Post Module
- description: 帖子回复 thread 模块
  name: Channel Module
- description: 表白墙模块
  name: Wall Module
- description: 广场分区模块
  name: Division Module
- description: 广场话题模块
  name: Topic Module
- description: 广场评论模块
  name: Comment Module
- description: 广场标签模块
  name: Tag Module
- description: 聊天模块
  name: Chat Module
